{
	"name": "SQL script 4",
	"properties": {
		"content": {
			"query": "IF NOT EXISTS (SELECT * FROM sys.objects O JOIN sys.schemas S ON O.schema_id = S.schema_id WHERE O.NAME = 'SBACurated2' AND O.TYPE = 'U' AND S.NAME = 'dbo')\nCREATE TABLE dbo.SBACurated2\n\t(\n\t [LoanNr_ChkDgt] bigint,\n\t [Name] nvarchar(4000),\n\t [City] nvarchar(4000),\n\t [State] nvarchar(4000),\n\t [Zip] bigint,\n\t [Bank] nvarchar(4000),\n\t [BankState] nvarchar(4000),\n\t [NAICS] bigint,\n\t [ApprovalDate] nvarchar(4000),\n\t [ApprovalFY] bigint,\n\t [Term] bigint,\n\t [NoEmp] bigint,\n\t [NewExist] bigint,\n\t [CreateJob] bigint,\n\t [RetainedJob] bigint,\n\t [FranchiseCode] bigint,\n\t [UrbanRural] bigint,\n\t [RevLineCr] bit,\n\t [LowDoc] bit,\n\t [DisbursementDate] nvarchar(4000),\n\t [DisbursementGross] bigint,\n\t [BalanceGross] bigint,\n\t [MIS_Status] bigint,\n\t [ChgOffPrinGr] bigint,\n\t [GrAppv] bigint,\n\t [SBA_Appv] bigint\n\t)\nWITH\n\t(\n\tDISTRIBUTION = ROUND_ROBIN,\n\t CLUSTERED COLUMNSTORE INDEX\n\t -- HEAP\n\t)\nGO\n\n--Uncomment the 4 lines below to create a stored procedure for data pipeline orchestrationâ€‹\nCREATE PROC bulk_load_SBACurated2\nAS\nBEGIN\nCOPY INTO dbo.SBACurated2\n(LoanNr_ChkDgt 1, Name 2, City 3, State 4, Zip 5, Bank 6, BankState 7, NAICS 8, ApprovalDate 9, ApprovalFY 10, Term 11, NoEmp 12, NewExist 13, CreateJob 14, RetainedJob 15, FranchiseCode 16, UrbanRural 17, RevLineCr 18, LowDoc 19, DisbursementDate 20, DisbursementGross 21, BalanceGross 22, MIS_Status 23, ChgOffPrinGr 24, GrAppv 25, SBA_Appv 26)\nFROM 'https://srgostorgen2hier.dfs.core.windows.net/sbacurated/part-merged.csv'\nWITH\n(\n\tFILE_TYPE = 'CSV'\n\t,MAXERRORS = 0\n\t,FIRSTROW = 2\n)\n--END\nGO\n\nSELECT TOP 100 * FROM dba.SBACurated2\nGO",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"poolName": "srgosqlpoolsyn",
				"databaseName": "srgosqlpoolsyn"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}